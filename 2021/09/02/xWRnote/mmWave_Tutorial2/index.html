<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="前言在上一篇博客中mmWave_Tutorial1我们讲述了关于Ti官方demo数据读取以及数据使用并给出了一段实例程序, 细心的读者在使用完历程后会发现ti官方demo所输出的点云数据非常的稀疏, 这一部分是由于mmwave设备天线的稀疏, 一部分是由于在ti官方demo中, 角度估计使用的是传统波束形成的方法其在天线维进行fft来进行角度估计, 而这样稀疏的点云数据不利于我们进行后续更高阶的应">
<meta property="og:type" content="article">
<meta property="og:title" content="mmWave_Tutorial2-快速上手mmWave 3D people counting demo">
<meta property="og:url" content="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/index.html">
<meta property="og:site_name" content="Bulijiojio Blog">
<meta property="og:description" content="前言在上一篇博客中mmWave_Tutorial1我们讲述了关于Ti官方demo数据读取以及数据使用并给出了一段实例程序, 细心的读者在使用完历程后会发现ti官方demo所输出的点云数据非常的稀疏, 这一部分是由于mmwave设备天线的稀疏, 一部分是由于在ti官方demo中, 角度估计使用的是传统波束形成的方法其在天线维进行fft来进行角度估计, 而这样稀疏的点云数据不利于我们进行后续更高阶的应">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/pplcount_overview_block2.png">
<meta property="og:image" content="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/pplcounting_tlv.png">
<meta property="article:published_time" content="2021-09-01T16:27:40.000Z">
<meta property="article:modified_time" content="2021-09-23T15:17:01.661Z">
<meta property="article:author" content="YXY">
<meta property="article:tag" content="mmWave_tutorial">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/pplcount_overview_block2.png">

<link rel="canonical" href="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>mmWave_Tutorial2-快速上手mmWave 3D people counting demo | Bulijiojio Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Bulijiojio Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">日常摸鱼划水的虾皮--如果公式不能正常显示请使用Chrome浏览器并安装Tex All the Things插件</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://example.com/2021/09/02/xWRnote/mmWave_Tutorial2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YXY">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bulijiojio Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          mmWave_Tutorial2-快速上手mmWave 3D people counting demo
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-02 00:27:40" itemprop="dateCreated datePublished" datetime="2021-09-02T00:27:40+08:00">2021-09-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-23 23:17:01" itemprop="dateModified" datetime="2021-09-23T23:17:01+08:00">2021-09-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TI-project/" itemprop="url" rel="index"><span itemprop="name">TI project</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在上一篇博客中<a href="mmWave_Tutorial1.md">mmWave_Tutorial1</a>我们讲述了关于Ti官方demo数据读取以及数据使用并给出了一段实例程序, 细心的读者在使用完历程后会发现ti官方demo所输出的点云数据非常的稀疏, 这一部分是由于mmwave设备天线的稀疏, 一部分是由于在ti官方demo中, 角度估计使用的是传统波束形成的方法其在天线维进行fft来进行角度估计, 而这样稀疏的点云数据不利于我们进行后续更高阶的应用, 而在TI IndustrialToolbox 的 3D people counting demo 中使用了 Capon自适应波束形成算法, 能够生成相对密集的点云, 为我们后续进行聚类, 目标跟踪行为识别等算法的实现提供了基础. 程序的源码, 预编译二进制文件以及相应的说明文档可以在如下的目录中找到.</p>
<blockquote>
<p>\ti\mmwave_industrial_toolbox_4_5_1\labs\people_counting\68xx_3D_people_counting</p>
</blockquote>
<p>需要注意的是在这篇博客当中所使用到的硬件设备为IWR6843ISK,IWR8843ISK-AOP或者IWR6843ISK-ODS. 同样IWR1843Boost也可以使用 </p>
<p>在这篇博客中我们利用之前的方法来对TI IndustrialToolbox 中的 3D people counting demo 进行上位机程序的编写, 来实现数据的解析与读取.</p>
<h1 id="3D-people-counting-demo概述"><a href="#3D-people-counting-demo概述" class="headerlink" title="3D people counting demo概述"></a>3D people counting demo概述</h1><p>与ti out of box demo相比 3D people counting demo实现了如下两个新的功能:</p>
<ol>
<li>雷达前端信号处理链( 包含Capon自适应波数形成算法)</li>
<li>gtrack多目标跟踪算法</li>
</ol>
<p>3D people counting demo的框图如下图所示<br><img src="/2021/09/02/xWRnote/mmWave_Tutorial2/pplcount_overview_block2.png" alt><br>需要注意的是gtrack多目标跟踪算法是实现在ARM上的</p>
<p>同时由于xWRxx43的雷达SoC采用了3发4收的天线通道,  与iwr1642相比, 收获了在俯仰角(elevation)上的分辨能力而不单单仅限于方位角(azimuth)上的分辨能力, 而不同的天线布局会影响到后级的信号处理, 在本篇博客中我不会去详细的介绍信号处理我将会将重点放在如何读取从雷达返回的已经处理好的点云数据.</p>
<h1 id="数据传输以及格式"><a href="#数据传输以及格式" class="headerlink" title="数据传输以及格式"></a>数据传输以及格式</h1><h2 id="CLI-port-数据传输及格式"><a href="#CLI-port-数据传输及格式" class="headerlink" title="CLI port 数据传输及格式"></a>CLI port 数据传输及格式</h2><p>在之前讲述ti out of box demo 我们提到了 CLI port 是用来发送对demo程序的配置信息, 而在 3D people counting demo中, 不同于 ti out of box demo的任务, 3D people counting demo需要进行天线阵列排布, 房间边界, 状态参数等等的配置, 所以它的 CLI port数据传输的格式与相应的意义与ti out of box demo 就有所不同 </p>
<p>具体的数据传输格式以及相应的含义可以在如下文档中的Modifying Configuration File的章节中找到</p>
<blockquote>
<p>/ti/mmwave_industrial_toolbox_4_5_1/labs/people_counting/68xx_3D_people_counting/docs/3d_pplcount_user_guide.pdf</p>
</blockquote>
<h2 id="Data-port-数据传输及格式"><a href="#Data-port-数据传输及格式" class="headerlink" title="Data port 数据传输及格式"></a>Data port 数据传输及格式</h2><p>与在ti out of box demo相似, 3D people counting 在数据传输时使用了 类似的 TLV 格式, 如下图所示<br><img src="/2021/09/02/xWRnote/mmWave_Tutorial2/pplcounting_tlv.png" alt></p>
<p>与ti out of box demo 不同的是,TLV的定义与数据传输的格式, 具体的数据传输格式可以在如下文档中的 Data Formats 的章节中找到</p>
<blockquote>
<p>/ti/mmwave_industrial_toolbox_4_5_1/labs/people_counting/68xx_3D_people_counting/docs/3d_pplcount_user_guide.pdf</p>
</blockquote>
<p>3D people counting user Guide中我们可以看到 3D people counting 的 TLV 有如下三种,分别是 </p>
<ol>
<li>Point Cloud TLV</li>
<li>Target Object TLV</li>
<li>Target Index TLV </li>
</ol>
<p>Point Cloud TLV用于传输雷达信号处理得到的点云数据, Target Object TLV用于输出gtrack算法输出的 target 的状态 比如位置, 速度, 加速度等, Target Index TLV 用于输出每个target 的独立的编号.<br>它的数据定义也是通过结构体来实现的, 我们可以参考ti out of box demo 从有关的定义来进行驱动程序的编写 </p>
<h1 id="相关代码-Matlab"><a href="#相关代码-Matlab" class="headerlink" title="相关代码(Matlab)"></a>相关代码(Matlab)</h1><blockquote>
<p><font color="red"><strong>注意</strong></font>: 为了方便读者的使用, 我已经将3D people counting demo 中进行了修改, 删除了其中目标跟踪的部分并编译成了二进制文件, 需要请联系我</p>
</blockquote>
<p>这部分的代码与 ti out of box demo 类似, 但是为了方便读者们复制粘贴使用 使用, 在这里依然给出相应的各个功能部分的代码, Data port 数据传输及格式的不同带来的变化主要反映在函数 <strong>function [dataOk, frameNumber, detObj] = readAndParseData(DATA_sphandle)</strong> 中 </p>
<h2 id="打开传输串口"><a href="#打开传输串口" class="headerlink" title="打开传输串口"></a>打开传输串口</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Description: </span></span><br><span class="line"><span class="comment">% Author: Yu Xuyao</span></span><br><span class="line"><span class="comment">% Email: yxy19991102@163.com</span></span><br><span class="line"><span class="comment">% Date: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditTime: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditors: Yu Xuyao</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[CLI_sphandle,DATA_sphandle]</span> = <span class="title">setupUART</span><span class="params">(CLIcomPortString,DATAcomPortString)</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> strcmp(CLIcomPortString(<span class="number">1</span>:<span class="number">3</span>),<span class="string">&#x27;COM&#x27;</span>) || strcmp(DATAcomPortString(<span class="number">1</span>:<span class="number">3</span>),<span class="string">&#x27;COM&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        CLI_sphandle = serial(CLIcomPortString,<span class="string">&#x27;BaudRate&#x27;</span>,<span class="number">115200</span>);</span><br><span class="line">        set(CLI_sphandle,<span class="string">&#x27;Parity&#x27;</span>,<span class="string">&#x27;none&#x27;</span>)</span><br><span class="line">        set(CLI_sphandle,<span class="string">&#x27;Terminator&#x27;</span>,<span class="string">&#x27;LF&#x27;</span>)</span><br><span class="line">        fopen(CLI_sphandle);</span><br><span class="line"></span><br><span class="line">        DATA_sphandle = serial(DATAcomPortString,<span class="string">&#x27;BaudRate&#x27;</span>,<span class="number">921600</span>);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;Terminator&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;InputBufferSize&#x27;</span>, <span class="number">65536</span>);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;Timeout&#x27;</span>,<span class="number">10</span>);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;ErrorFcn&#x27;</span>,@dispError);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;BytesAvailableFcnMode&#x27;</span>,<span class="string">&#x27;byte&#x27;</span>);</span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;BytesAvailableFcnCount&#x27;</span>, <span class="number">2</span>^<span class="number">16</span>+<span class="number">1</span>);<span class="comment">%BYTES_AVAILABLE_FCN_CNT);</span></span><br><span class="line">        set(DATA_sphandle,<span class="string">&#x27;BytesAvailableFcn&#x27;</span>,@readUartCallbackFcn);</span><br><span class="line">        fopen(DATA_sphandle);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        fprintf(<span class="string">&#x27;COM port string format wrong\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="CLI-port配置数据"><a href="#CLI-port配置数据" class="headerlink" title="CLI port配置数据"></a>CLI port配置数据</h2><p>这个 CLI port 的配置数据是用来配置IWR8843ISK-AOP, 其他的型号的mmWave雷达开发板的有关配置可以在如下的文件中找到 </p>
<blockquote>
<p>\ti\mmwave_industrial_toolbox_4_5_1\labs\people_counting\68xx_3D_people_counting\chirp_configs</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sensorStop</span><br><span class="line">flushCfg</span><br><span class="line">dfeDataOutputMode 1</span><br><span class="line">channelCfg 15 7 0</span><br><span class="line">adcCfg 2 1</span><br><span class="line">adcbufCfg -1 0 1 1 1</span><br><span class="line">lowPower 0 0</span><br><span class="line">profileCfg 0 60.75 7 7 41.10 0 0 54.71 1 96 2950.00 0 0 36 </span><br><span class="line">chirpCfg 0 0 0 0 0 0 0 1</span><br><span class="line">chirpCfg 1 1 0 0 0 0 0 2</span><br><span class="line">chirpCfg 2 2 0 0 0 0 0 4</span><br><span class="line">frameCfg 0 2  96  0 50 1 0</span><br><span class="line">dynamicRACfarCfg -1 4 4 2 4 8 16 4 4 4.00 4.50 0.50 1 1</span><br><span class="line">staticRACfarCfg -1 4 4 2 4 8 16 4 6 12.00 13.00 0.30 0 0</span><br><span class="line">dynamicRangeAngleCfg -1 0.75 0.0010 1 0</span><br><span class="line">dynamic2DAngleCfg -1 1.5 0.0300 1 0 1 0.50 0.85 8.00</span><br><span class="line">staticRangeAngleCfg -1 1 8 4</span><br><span class="line">antGeometry0 -1 -1 0 0 -3 -3 -2 -2 -1 -1 0 0</span><br><span class="line">antGeometry1 -1 0 -1 0 -3 -2 -3 -2 -3 -2 -3 -2</span><br><span class="line">antPhaseRot 1 -1 1 -1 1 -1 1 -1 1 -1 1 -1</span><br><span class="line">fovCfg -1 70.0 20.0</span><br><span class="line">compRangeBiasAndRxChanPhase 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 </span><br><span class="line">staticBoundaryBox -2 2 2 8.5 -2 2</span><br><span class="line">boundaryBox -2.5 2.5 0.5 9 -2.5 2.5</span><br><span class="line">sensorPosition 2 0 0</span><br><span class="line">gatingParam 3 2 2 2 0</span><br><span class="line">stateParam 3 3 10 40 5 600</span><br><span class="line">allocationParam 00 800 0.1 15 0.1 20</span><br><span class="line">trackingCfg 1 2 1000 20 67 105 50</span><br><span class="line">sensorStart</span><br></pre></td></tr></table></figure>
<h2 id="读取CLI-port配置数据"><a href="#读取CLI-port配置数据" class="headerlink" title="读取CLI port配置数据"></a>读取CLI port配置数据</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Description: </span></span><br><span class="line"><span class="comment">% Author: Yu Xuyao</span></span><br><span class="line"><span class="comment">% Email: yxy19991102@163.com</span></span><br><span class="line"><span class="comment">% Date: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditTime: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditors: Yu Xuyao</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[configcmd]</span> = <span class="title">readCfgFile</span><span class="params">(configFile)</span></span></span><br><span class="line"></span><br><span class="line">configcmd = cell(<span class="number">1</span>,<span class="number">100</span>);</span><br><span class="line">fid = fopen(configFile, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> fid == <span class="number">-1</span></span><br><span class="line">    fprintf(<span class="string">&#x27;File %s not found!\n&#x27;</span>, configFile);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    fprintf(<span class="string">&#x27;Opening configuration file %s ...\n&#x27;</span>, configFile);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">tline = fgetl(fid);</span><br><span class="line">k=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> ischar(tline)</span><br><span class="line">    <span class="keyword">if</span> ~<span class="built_in">isempty</span>(tline)</span><br><span class="line">        configcmd&#123;k&#125; = tline;</span><br><span class="line">        k = k + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line">    tline = fgetl(fid);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">configcmd = configcmd(<span class="number">1</span>:k<span class="number">-1</span>);</span><br><span class="line">fclose(fid);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="发送CLI-port的配置数据"><a href="#发送CLI-port的配置数据" class="headerlink" title="发送CLI port的配置数据"></a>发送CLI port的配置数据</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Description: </span></span><br><span class="line"><span class="comment">% Author: Yu Xuyao</span></span><br><span class="line"><span class="comment">% Email: yxy19991102@163.com</span></span><br><span class="line"><span class="comment">% Date: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditTime: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditors: Yu Xuyao</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendCfg</span><span class="params">(UART_sphandle,configcmd)</span></span></span><br><span class="line">mmwDemoCliPrompt = char(<span class="string">&#x27;mmwDemo:/&gt;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%Send CLI configuration to IWR</span></span><br><span class="line">fprintf(<span class="string">&#x27;Sending configuration to IWR radar\n&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">length</span>(configcmd)</span><br><span class="line">    command = configcmd&#123;k&#125;;</span><br><span class="line">    fprintf(UART_sphandle, command);</span><br><span class="line">    fprintf(<span class="string">&#x27;%s\n&#x27;</span>, command);</span><br><span class="line">    echo = fgetl(UART_sphandle); <span class="comment">% Get an echo of a command</span></span><br><span class="line">    done = fgetl(UART_sphandle); <span class="comment">% Get &quot;Done&quot;</span></span><br><span class="line">    fprintf(<span class="string">&#x27;%s\n&#x27;</span>, done);</span><br><span class="line">    prompt = fread(UART_sphandle, <span class="built_in">size</span>(mmwDemoCliPrompt,<span class="number">2</span>)); <span class="comment">% Get the prompt back</span></span><br><span class="line">    fprintf(<span class="string">&#x27;%s\n&#x27;</span>, prompt);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="读取Data-port数据"><a href="#读取Data-port数据" class="headerlink" title="读取Data port数据"></a>读取Data port数据</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Description: </span></span><br><span class="line"><span class="comment">% Author: Yu Xuyao</span></span><br><span class="line"><span class="comment">% Email: yxy19991102@163.com</span></span><br><span class="line"><span class="comment">% Date: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditTime: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditors: Yu Xuyao</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[dataOk, frameNumber, pointStruct,targetStruct2D]</span> = <span class="title">readAndParseData</span><span class="params">(DATA_sphandle)</span></span></span><br><span class="line">    pointStruct_SIZE_BYTES = <span class="number">8</span>;</span><br><span class="line">    targetStruct2D_SIZE_BYTES = <span class="number">40</span>;</span><br><span class="line">    BYTE_VEC_ACC_MAX_SIZE = <span class="number">2</span>^<span class="number">16</span>;</span><br><span class="line">    POINT_CLOUD_2D = <span class="number">6</span>;</span><br><span class="line">    TARGET_LIST_3D   = <span class="number">7</span>;</span><br><span class="line">     TARGET_INDEX  = <span class="number">8</span>;</span><br><span class="line">    maxBufferSize = BYTE_VEC_ACC_MAX_SIZE;</span><br><span class="line">    </span><br><span class="line">    pointStruct =[];</span><br><span class="line">    targetStruct2D = [];</span><br><span class="line">    frameNumber = <span class="number">0</span>;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">persistent</span> byteBuffer</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isempty</span>(byteBuffer)</span><br><span class="line">        byteBuffer = <span class="built_in">zeros</span>(maxBufferSize,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">persistent</span> byteBufferLength</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isempty</span>(byteBufferLength)</span><br><span class="line">        byteBufferLength = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">persistent</span> magiNotOkCounter</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isempty</span>(magiNotOkCounter)</span><br><span class="line">        magiNotOkCounter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    magicOk = <span class="number">0</span>;</span><br><span class="line">    dataOk = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    bytesToRead = get(DATA_sphandle,<span class="string">&#x27;BytesAvailable&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (bytesToRead ~= <span class="number">0</span>)</span><br><span class="line">        <span class="comment">% Read the Data Serial Port</span></span><br><span class="line">        [bytevec, byteCount] = fread(DATA_sphandle, bytesToRead, <span class="string">&#x27;uint8&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">         <span class="comment">% Check if the buffer is not full, and then add the data to the buffer:</span></span><br><span class="line">        <span class="keyword">if</span>(byteBufferLength + byteCount &lt; maxBufferSize)</span><br><span class="line">            byteBuffer(byteBufferLength+<span class="number">1</span>:byteBufferLength + byteCount) = bytevec(<span class="number">1</span>:byteCount);</span><br><span class="line">            byteBufferLength = byteBufferLength + byteCount;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">% Check that the buffer is not empty:</span></span><br><span class="line">    <span class="keyword">if</span> byteBufferLength &gt; <span class="number">16</span></span><br><span class="line">        byteBufferStr = char(byteBuffer);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">% Search for the magic number inside the buffer and check that at least one magic number has been found:</span></span><br><span class="line">        startIdx = strfind(byteBufferStr&#x27;, char([<span class="number">2</span> <span class="number">1</span> <span class="number">4</span> <span class="number">3</span> <span class="number">6</span> <span class="number">5</span> <span class="number">8</span> <span class="number">7</span>]));</span><br><span class="line">        <span class="keyword">if</span> ~<span class="built_in">isempty</span>(startIdx)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">% Check the position of the first magic number and put it at</span></span><br><span class="line">            <span class="comment">% the beginning of the buffer</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">length</span>(startIdx) &gt;= <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> startIdx(<span class="keyword">end</span><span class="number">-1</span>) &gt; <span class="number">1</span></span><br><span class="line">                    byteBuffer(<span class="number">1</span>:byteBufferLength-(startIdx(<span class="number">1</span>)<span class="number">-1</span>)) = byteBuffer(startIdx(<span class="number">1</span>):byteBufferLength);</span><br><span class="line">                    byteBufferLength = byteBufferLength - (startIdx(<span class="number">1</span>)<span class="number">-1</span>);</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">if</span> startIdx(<span class="number">1</span>) &gt; <span class="number">1</span></span><br><span class="line">                    byteBuffer(<span class="number">1</span>:byteBufferLength-(startIdx(<span class="number">1</span>)<span class="number">-1</span>)) = byteBuffer(startIdx(<span class="number">1</span>):byteBufferLength);</span><br><span class="line">                    byteBufferLength = byteBufferLength - (startIdx(<span class="number">1</span>)<span class="number">-1</span>);</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span> byteBufferLength &lt; <span class="number">0</span></span><br><span class="line">                byteBufferLength = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">            totalPacketLen = sum(byteBuffer(<span class="number">8</span>+<span class="number">4</span>+[<span class="number">1</span>:<span class="number">4</span>]) .* [<span class="number">1</span> <span class="number">256</span> <span class="number">65536</span> <span class="number">16777216</span>]&#x27;);</span><br><span class="line">            <span class="keyword">if</span> ((byteBufferLength &gt;= totalPacketLen) &amp;&amp; (byteBufferLength ~= <span class="number">0</span>)) </span><br><span class="line">                magicOk = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                magicOk = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (magicOk == <span class="number">1</span>)</span><br><span class="line">        <span class="comment">%%%%% HEADER</span></span><br><span class="line">        word = [<span class="number">1</span> <span class="number">256</span> <span class="number">65536</span> <span class="number">16777216</span>]&#x27;;</span><br><span class="line">        idx = <span class="number">0</span>;</span><br><span class="line">        magicNumber = byteBuffer(idx + <span class="number">1</span>:<span class="number">8</span>);</span><br><span class="line">        idx = idx + <span class="number">8</span>;</span><br><span class="line">        Header.version = dec2hex(sum(byteBuffer(idx+[<span class="number">1</span>:<span class="number">4</span>]) .* word));</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.totalPacketLen = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.platform = dec2hex(sum(byteBuffer(idx+[<span class="number">1</span>:<span class="number">4</span>]) .* word));</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.frameNumber = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        frameNumber = Header.frameNumber;</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.subFrameNumber = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.chirpProcessingMargin = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.frameProcessingMargin = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.trackProcessTime = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.uartSentTime = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">4</span>;</span><br><span class="line">        Header.numTLVs = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">2</span>))),<span class="string">&#x27;uint16&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">2</span>;</span><br><span class="line">        Header.checksum = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">2</span>))),<span class="string">&#x27;uint16&#x27;</span>);</span><br><span class="line">        idx = idx + <span class="number">2</span>;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">%%%%% TLV</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">% Analyze each of TLV messages:</span></span><br><span class="line">        <span class="keyword">for</span> tlvIdx = <span class="number">1</span>:Header.numTLVs</span><br><span class="line">            <span class="comment">% First, analyze the TLV header (TLV type and length):</span></span><br><span class="line">            tlv.<span class="built_in">type</span> = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">            idx = idx + <span class="number">4</span>;</span><br><span class="line">            tlv.<span class="built_in">length</span> = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>);</span><br><span class="line">            idx = idx + <span class="number">4</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">% Check that the TLV message is of the right type (Detected objects):</span></span><br><span class="line">            <span class="keyword">switch</span> tlv.<span class="built_in">type</span></span><br><span class="line">                <span class="keyword">case</span> POINT_CLOUD_2D</span><br><span class="line">                    numberOfPoints = (tlv.<span class="built_in">length</span> - <span class="number">28</span>)/pointStruct_SIZE_BYTES;</span><br><span class="line">                    </span><br><span class="line">                    pointUnit.elevationUnit = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>);</span><br><span class="line">                    idx = idx + <span class="number">4</span>;</span><br><span class="line">                    pointUnit.azimuthUnit = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>);</span><br><span class="line">                    idx = idx + <span class="number">4</span>;</span><br><span class="line">                    pointUnit.dopplerUnit = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>);</span><br><span class="line">                    idx = idx + <span class="number">4</span>;</span><br><span class="line">                    pointUnit.rangeUnit = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>);</span><br><span class="line">                    idx = idx + <span class="number">4</span>;</span><br><span class="line">                    pointUnit.snrUnit = typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>);</span><br><span class="line">                    idx = idx + <span class="number">4</span>;</span><br><span class="line">                    pointStruct.elevation =[];</span><br><span class="line">                    pointStruct.azimuth =[];</span><br><span class="line">                    pointStruct.doppler =[];</span><br><span class="line">                    pointStruct.range =[];</span><br><span class="line">                    pointStruct.snr =[];</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> numberOfPoints &gt; <span class="number">0</span>  </span><br><span class="line">                        <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:numberOfPoints</span><br><span class="line">                            pointStruct.elevation = [pointStruct.elevation  single(typecast(uint8(byteBuffer(idx+<span class="number">1</span>)),<span class="string">&#x27;int8&#x27;</span>))*pointUnit.elevationUnit];</span><br><span class="line">                            idx = idx + <span class="number">1</span>;</span><br><span class="line">                            pointStruct.azimuth = [pointStruct.azimuth  single(typecast(uint8(byteBuffer(idx+<span class="number">1</span>)),<span class="string">&#x27;int8&#x27;</span>))*pointUnit.azimuthUnit];</span><br><span class="line">                            idx = idx + <span class="number">1</span>;</span><br><span class="line">                            pointStruct.doppler = [pointStruct.doppler  single(typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">2</span>))),<span class="string">&#x27;int16&#x27;</span>))*pointUnit.dopplerUnit];</span><br><span class="line">                            idx = idx + <span class="number">2</span>;</span><br><span class="line">                            pointStruct.range = [pointStruct.range  single(typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">2</span>))),<span class="string">&#x27;uint16&#x27;</span>))*pointUnit.rangeUnit];</span><br><span class="line">                            idx = idx + <span class="number">2</span>;</span><br><span class="line">                            pointStruct.snr = [pointStruct.snr  single(typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">2</span>))),<span class="string">&#x27;uint16&#x27;</span>))*pointUnit.snrUnit];</span><br><span class="line">                            idx = idx + <span class="number">2</span>;</span><br><span class="line">                        <span class="keyword">end</span></span><br><span class="line">                        dataOk = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">case</span> TARGET_LIST_3D</span><br><span class="line">                    numberOfTargets = (tlv.<span class="built_in">length</span> - <span class="number">28</span>)/targetStruct2D_SIZE_BYTES;</span><br><span class="line">                    <span class="keyword">if</span> tlv.<span class="built_in">length</span> &gt; <span class="number">0</span>   </span><br><span class="line">                        targetStruct2D.tid = [];</span><br><span class="line">                        targetStruct2D.posX = [];</span><br><span class="line">                        targetStruct2D.posY = [];</span><br><span class="line">                        targetStruct2D.velX = [];</span><br><span class="line">                        targetStruct2D.velY = [];</span><br><span class="line">                        targetStruct2D.accX = [];</span><br><span class="line">                        targetStruct2D.accY = [];</span><br><span class="line">                        targetStruct2D.posZ = [];</span><br><span class="line">                        targetStruct2D.velZ = [];</span><br><span class="line">                        targetStruct2D.accZ = [];</span><br><span class="line">                        </span><br><span class="line">                        <span class="keyword">if</span> numberOfPoints &gt; <span class="number">0</span>  </span><br><span class="line">                            <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:numberOfPoints</span><br><span class="line">                                targetStruct2D.tid = [targetStruct2D.tid typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;uint32&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.posX = [targetStruct2D.posX typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.posY = [targetStruct2D.posY typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.velX = [targetStruct2D.velX typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.velY = [targetStruct2D.velY typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.accX = [targetStruct2D.accX typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.accY = [targetStruct2D.accY typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.posZ = [targetStruct2D.posZ typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.velZ = [targetStruct2D.velZ typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                                targetStruct2D.accZ = [targetStruct2D.accZ typecast(uint8(byteBuffer(idx+(<span class="number">1</span>:<span class="number">4</span>))),<span class="string">&#x27;single&#x27;</span>)];</span><br><span class="line">                                idx = idx + <span class="number">4</span>;</span><br><span class="line">                            <span class="keyword">end</span></span><br><span class="line">                        <span class="keyword">end</span></span><br><span class="line">                        </span><br><span class="line">                        dataOk = <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">case</span> TARGET_INDEX</span><br><span class="line"><span class="comment">%                     rp = byteBuffer(idx+(1:tlv.length));</span></span><br><span class="line"><span class="comment">%                     idx = idx + tlv.length;</span></span><br><span class="line"><span class="comment">%                     rp=rp(1:2:end)+rp(2:2:end)*256;</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="comment">%Remove processed data</span></span><br><span class="line">        <span class="keyword">if</span> idx &gt; <span class="number">0</span></span><br><span class="line">            shiftSize = Header.totalPacketLen;</span><br><span class="line">            byteBuffer(<span class="number">1</span>: byteBufferLength-shiftSize) = byteBuffer(shiftSize+<span class="number">1</span>:byteBufferLength);</span><br><span class="line">            byteBufferLength = byteBufferLength - shiftSize;</span><br><span class="line">            <span class="keyword">if</span> byteBufferLength &lt; <span class="number">0</span></span><br><span class="line">                <span class="comment">%             fprintf(&#x27;Error: bytevec_cp_len &lt; bytevecAccLen, %d %d \n&#x27;, bytevec_cp_len, bytevecAccLen)</span></span><br><span class="line">                byteBufferLength = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="comment">%         if byteBufferLength &gt; (byteBufferLength * 7/8)</span></span><br><span class="line"><span class="comment">%             byteBufferLength = 0;</span></span><br><span class="line"><span class="comment">%         end</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        magiNotOkCounter = magiNotOkCounter + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">                        </span><br><span class="line">                    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Description: </span></span><br><span class="line"><span class="comment">% Author: Yu Xuyao</span></span><br><span class="line"><span class="comment">% Email: yxy19991102@163.com</span></span><br><span class="line"><span class="comment">% Date: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditTime: 2020-12-25 00:26:00</span></span><br><span class="line"><span class="comment">% LastEditors: Yu Xuyao</span></span><br><span class="line"></span><br><span class="line">clear all</span><br><span class="line">close all</span><br><span class="line">clc</span><br><span class="line"></span><br><span class="line">VisualReview = <span class="number">1</span>;</span><br><span class="line">FallDetection = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">delete(instrfind);</span><br><span class="line"></span><br><span class="line">configFile = <span class="string">&quot;AOPconfig.cfg&quot;</span>;</span><br><span class="line">configcmd = readCfgFile(configFile);</span><br><span class="line">[CLI_sphandle,DATA_sphandle] = setupUART(<span class="string">&#x27;COM3&#x27;</span>,<span class="string">&#x27;COM5&#x27;</span>);</span><br><span class="line">sendCfg(CLI_sphandle,configcmd);</span><br><span class="line"></span><br><span class="line">limit = <span class="number">4</span>;</span><br><span class="line">N= <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span></span><br><span class="line"></span><br><span class="line">H1 = uicontrol(<span class="string">&#x27;Style&#x27;</span>, <span class="string">&#x27;PushButton&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;Shutdown&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;Callback&#x27;</span>, <span class="string">&#x27;shutVal = 1&#x27;</span>,<span class="string">&#x27;InnerPosition&#x27;</span>,[<span class="number">7</span>,<span class="number">30</span>,<span class="number">60</span>,<span class="number">20</span>]);</span><br><span class="line">H2 = uicontrol(<span class="string">&#x27;Style&#x27;</span>, <span class="string">&#x27;PushButton&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;Stop&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;Callback&#x27;</span>, <span class="string">&#x27;stopVal = 1&#x27;</span>,<span class="string">&#x27;InnerPosition&#x27;</span>,[<span class="number">7</span>,<span class="number">60</span>,<span class="number">60</span>,<span class="number">20</span>]);</span><br><span class="line">H3 = uicontrol(<span class="string">&#x27;Style&#x27;</span>, <span class="string">&#x27;PushButton&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;String&#x27;</span>, <span class="string">&#x27;Start&#x27;</span>, ...</span><br><span class="line">                    <span class="string">&#x27;Callback&#x27;</span>, <span class="string">&#x27;startVal = 1&#x27;</span>,<span class="string">&#x27;InnerPosition&#x27;</span>,[<span class="number">7</span>,<span class="number">90</span>,<span class="number">60</span>,<span class="number">20</span>]);  </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">h0 = <span class="built_in">scatter3</span>([],[],[],<span class="string">&#x27;filled&#x27;</span>);</span><br><span class="line">axis([-limit,limit,<span class="number">0</span>,<span class="number">7</span>,<span class="number">-1.5</span>,<span class="number">1.5</span>]);</span><br><span class="line">xlabel(<span class="string">&#x27;X (m)&#x27;</span>); ylabel(<span class="string">&#x27;Y (m)&#x27;</span>);zlabel(<span class="string">&#x27;Z (m)&#x27;</span>);</span><br><span class="line"></span><br><span class="line">myInd = <span class="number">1</span>;</span><br><span class="line">dataOk = <span class="number">0</span>;</span><br><span class="line">stopVal = <span class="number">0</span>;</span><br><span class="line">startVal = <span class="number">0</span>;</span><br><span class="line">shutVal = <span class="number">0</span>;</span><br><span class="line">mask = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">frame = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (myInd &lt;= N)</span><br><span class="line">    dataOk = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> mask ==<span class="number">1</span></span><br><span class="line">        pause(<span class="number">0.1</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        [dataOk, frameNumber, pointStruct,targetStruct2D] = readAndParseData(DATA_sphandle);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> stopVal == <span class="number">1</span></span><br><span class="line">        stopVal = <span class="number">0</span>;</span><br><span class="line">        mask = <span class="number">1</span>;</span><br><span class="line">        fprintf(CLI_sphandle, <span class="string">&#x27;sensorStop\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> startVal == <span class="number">1</span></span><br><span class="line">        startVal = <span class="number">0</span>;</span><br><span class="line">        mask = <span class="number">0</span>;</span><br><span class="line">        fprintf(CLI_sphandle, <span class="string">&#x27;sensorStart 0\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> shutVal == <span class="number">1</span></span><br><span class="line">        shutVal = <span class="number">0</span>;</span><br><span class="line">        fprintf(CLI_sphandle, <span class="string">&#x27;sensorStop\n&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> dataOk == <span class="number">1</span></span><br><span class="line">        XData = [];</span><br><span class="line">        YData = [];</span><br><span class="line">        ZData = [];</span><br><span class="line"></span><br><span class="line">        graphXData = [];</span><br><span class="line">        graphYData = [];</span><br><span class="line">        graphZData = [];   </span><br><span class="line">        <span class="comment">% remove static points</span></span><br><span class="line">        processingSignal = [pointStruct.elevation ;pointStruct.azimuth;pointStruct.doppler;pointStruct.range;pointStruct.snr];</span><br><span class="line"></span><br><span class="line">        frame&#123;myInd&#125; = processingSignal&#x27;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> VisualReview</span><br><span class="line">            <span class="keyword">if</span> myInd&gt;<span class="number">3</span></span><br><span class="line">                showData = [frame&#123;myInd&#125;; frame&#123;myInd<span class="number">-1</span>&#125;; frame&#123;myInd<span class="number">-2</span>&#125;];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                showData = frame&#123;myInd&#125;;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">			temp = showData(:,<span class="number">4</span>) .* <span class="built_in">cos</span>(showData(:,<span class="number">1</span>));</span><br><span class="line">			pos.XData = temp.*<span class="built_in">sin</span>(showData(:,<span class="number">2</span>));</span><br><span class="line">			pos.YData = temp.*<span class="built_in">cos</span>(showData(:,<span class="number">2</span>));</span><br><span class="line">			pos.ZData = showData(:,<span class="number">4</span>) .* <span class="built_in">sin</span>(showData(:,<span class="number">1</span>));</span><br><span class="line">			pos.Doppler = showData(:,<span class="number">3</span>);</span><br><span class="line">			pos.SNR = showData(:,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">% Plotprocessed points</span></span><br><span class="line">            h0.XData = pos.XData;</span><br><span class="line">            h0.YData = pos.YData;</span><br><span class="line">            h0.ZData = pos.ZData;</span><br><span class="line">            h0.SizeData = <span class="number">3</span>*<span class="built_in">ones</span>(<span class="number">1</span>,<span class="built_in">length</span>(pos.ZData));</span><br><span class="line">            h0.CData = <span class="built_in">abs</span>(pos.Doppler);</span><br><span class="line"></span><br><span class="line">            title([<span class="string">&#x27;Frame No.&#x27;</span> num2str(myInd)]);</span><br><span class="line">            drawnow limitrate;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        </span><br><span class="line">        pause(<span class="number">0.04</span>);</span><br><span class="line"></span><br><span class="line">        myInd = myInd + <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">delete(instrfind);</span><br><span class="line">close all</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/mmWave-tutorial/" rel="tag"># mmWave_tutorial</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/09/01/xWRnote/mmWave_Tutorial1/" rel="prev" title="mmWave_Tutorial1-快速上手mmWave Out of box demo">
      <i class="fa fa-chevron-left"></i> mmWave_Tutorial1-快速上手mmWave Out of box demo
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/09/03/xWRnote/mmWave_Tutorial3/" rel="next" title="mmWave_Tutorial3-快速上手Target tracking and management">
      mmWave_Tutorial3-快速上手Target tracking and management <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3D-people-counting-demo%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">3D people counting demo概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E4%BB%A5%E5%8F%8A%E6%A0%BC%E5%BC%8F"><span class="nav-number">3.</span> <span class="nav-text">数据传输以及格式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CLI-port-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8F%8A%E6%A0%BC%E5%BC%8F"><span class="nav-number">3.1.</span> <span class="nav-text">CLI port 数据传输及格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Data-port-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8F%8A%E6%A0%BC%E5%BC%8F"><span class="nav-number">3.2.</span> <span class="nav-text">Data port 数据传输及格式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%A0%81-Matlab"><span class="nav-number">4.</span> <span class="nav-text">相关代码(Matlab)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%BC%80%E4%BC%A0%E8%BE%93%E4%B8%B2%E5%8F%A3"><span class="nav-number">4.1.</span> <span class="nav-text">打开传输串口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CLI-port%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.</span> <span class="nav-text">CLI port配置数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96CLI-port%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE"><span class="nav-number">4.3.</span> <span class="nav-text">读取CLI port配置数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E9%80%81CLI-port%E7%9A%84%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE"><span class="nav-number">4.4.</span> <span class="nav-text">发送CLI port的配置数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96Data-port%E6%95%B0%E6%8D%AE"><span class="nav-number">4.5.</span> <span class="nav-text">读取Data port数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F"><span class="nav-number">4.6.</span> <span class="nav-text">示例程序</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YXY</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Mr-Bulijiojio" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Mr-Bulijiojio" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/frompyrmaidinside@gmail.com" title="E-Mail → frompyrmaidinside@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YXY</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
